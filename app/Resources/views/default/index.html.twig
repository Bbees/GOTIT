{% extends 'base.html.twig' %}

{% block headincl %}
  <!-- Plotly -->
  <script src="{{ asset('e3s/vendors/plotly.js/plotly-latest.min.js') }}"></script>
{% endblock %}

{% block titlepage %}  
    <div class="page-title">
        
      <div class="title_right" >
        <h1>
            <!-- <img rel="icon" src="{{ asset('e3s/images/logo-BBEES.png') }}" type="image" width="50" height="50" alt="Unité Bases de données sur la Biodiversité, Écologie, Environnement et Sociétés (BBEES), Muséum national d'Histoire naturelle, CNRS " />  -->
           <i>  {{'Dashboard.Gene Occurence et Taxa en Taxonomie Integrative'|trans}} </i>
        </h1>
      </div>
        
    </div>            
    <div class="clearfix"></div>
{% endblock %} 

{% block body %}
 
     <div class="row">
         <img rel="icon" src="{{ asset('e3s/images/logo-BBEES.png') }}" type="image" width="75" height="75" alt="Unité Bases de données sur la Biodiversité, Écologie, Environnement et Sociétés (BBEES), Muséum national d'Histoire naturelle, CNRS " />
         <span class="img-thumbnail">BBEES : Unité Bases de données sur la<br>Biodiversité, Écologie, Environnement et Sociétés</span>          
     </div>
    
  <!-- top tiles --> 
  <div class="row tile_count">
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Station</span>
      <div class="count">{{ nbstations }}</div>
    </div>
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Collecte</span>
      <div class="count">{{ nbcollectes }}</div>
    </div>
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Materiel</span>
      <div class="count">{{ nbLotMateriel }}</div>
    </div>
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Materiel Externe</span>
      <div class="count">{{ nbLotMaterielExt }}</div>
    </div>   
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Individu</span>
      <div class="count">{{ nbIndividu }}</div>
    </div>
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total IndividuLame</span>
      <div class="count">{{ nbIndividuLame }}</div>
    </div>   
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Adn</span>
      <div class="count">{{ nbAdn }}</div>
    </div>
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Pcr</span>
      <div class="count">{{ nbPcr }}</div>
    </div>    
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Chromatogramme</span>
      <div class="count">{{ nbChromatogramme }}</div>
    </div>    
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total SequenceAssemblee</span>
      <div class="count">{{ nbSequenceAssemblee }}</div>
    </div>    
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total SequenceAssembleeExt</span>
      <div class="count">{{ nbSequenceAssembleeExt }}</div>
    </div>       
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Motu Assigne</span>
      <div class="count">{{ nbMotu }}</div>
    </div>    
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Boite</span>
      <div class="count">{{ nbBoite }}</div>
    </div>     
    <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
      <span class="count_top"><i class="fa fa-user"></i> Total Source</span>
      <div class="count">{{ nbSource }}</div>
    </div> 
    
  </div>
  <!-- /top tiles -->
   
    
    
    
  <div class="row">

    <div class="col-md-5 col-sm-5 col-xs-15">
      <div class="x_panel">
        <div class="x_title">
          <h2>{{'Dashboard.Distribution des stations'|trans}}</h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
                <div class="geo-container">
                <div id="station-geo-map" style="width:100%">
                </div>
                <div class="geo-overlay">
                <i class="fa fa-spinner fa-spin fa-4x"></i>
                </div>
                </div>
        </div>
      </div>
    </div>

    <div class="col-md-2 col-sm-2 col-xs-6">
      <div class="x_panel  overflow_hidden">
        <div class="x_title">
          <h2>Adn sequence</h2>
          <ul class="nav navbar-right panel_toolbox">
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">

        </div>
      </div>
    </div>


    <div class="col-md-5 col-sm-5 col-xs-15">
      <div class="x_panel ">
        <div class="x_title">
          <h2>Proaselus valdensis</h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
            
        </div>
      </div>
    </div>

  </div>  
    
{% set NbTot = nbSequenceAssemblee+nbChromatogramme+nbPcr+nbIndividu+nbLotMateriel %}

  <div class="row">


    <div class="col-md-4 col-sm-4 col-xs-12">
      <div class="x_panel tile fixed_height_320">
        <div class="x_title">
          <h2>Données E3S</h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
          <h4></h4>
          
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Sqc. Assemblee</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbSequenceAssemblee/(NbTot)}}%;">
                  <span class="sr-only">{{ 100*nbSequenceAssemblee/(NbTot)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbSequenceAssemblee }}</span>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Chromatogramme</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbChromatogramme/(NbTot)}}%;">
                  <span class="sr-only">{{ 100*nbChromatogramme/(NbTot)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbChromatogramme }}</span>
            </div>
            <div class="clearfix"></div>
          </div>

          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Pcr</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbPcr/(NbTot)}}%;">
                  <span class="sr-only">{{ 100*nbPcr/(NbTot)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{nbPcr}}</span>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Individu</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbIndividu/(NbTot)}}%;">
                  <span class="sr-only">{{ 100*nbIndividu/(NbTot)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{nbIndividu}}</span>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Lot Materiel</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbLotMateriel/(NbTot)}}%;">
                  <span class="sr-only">{{ 100*nbLotMateriel/(NbTot)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{nbLotMateriel}}</span>
            </div>
            <div class="clearfix"></div>
          </div>

        </div>
      </div>
    </div>

    <div class="col-md-4 col-sm-4 col-xs-12">
      <div class="x_panel tile fixed_height_320 overflow_hidden">
        <div class="x_title">
          <h2>Données de la littérature</h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
            
          
         <div class="widget_summary">
            <div class="w_left w_25">
              <span>Sqc. Assemblee Ext.</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbSequenceAssembleeExt/(nbSequenceAssembleeExt+nbLotMaterielExt)}}%;">
                  <span class="sr-only">{{ 100*nbSequenceAssembleeExt/(nbSequenceAssembleeExt+nbLotMaterielExt)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbSequenceAssembleeExt }}</span>
            </div>
            <div class="clearfix"></div>
          </div>
            
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>Lot Materiel Ext.</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbLotMaterielExt/(nbSequenceAssembleeExt+nbLotMaterielExt)}}%;">
                  <span class="sr-only">{{ 100*nbLotMaterielExt/(nbSequenceAssembleeExt+nbLotMaterielExt)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbLotMaterielExt }}</span>
            </div>
            <div class="clearfix"></div>
          </div>

        </div>
      </div>
    </div>


    <div class="col-md-4 col-sm-4 col-xs-12">
      <div class="x_panel tile fixed_height_320">
        <div class="x_title">
          <h2>Données MOTU </h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
         <div class="widget_summary">
            <div class="w_left w_25">
              <span>MOTU / Sqc. Assemblee</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbMotuSqcAss/(nbMotu)}}%;">
                  <span class="sr-only">{{100*nbMotuSqcAss/(nbMotu)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbMotuSqcAss }}</span>
            </div>
            <div class="clearfix"></div>
          </div>
          <div class="widget_summary">
            <div class="w_left w_25">
              <span>MOTU / Sqc. Assemblee Ext</span>
            </div>
            <div class="w_center w_55">
              <div class="progress">
                <div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{ 100*nbMotuSqcAssExt/(nbMotu)}}%;">
                  <span class="sr-only">{{100*nbMotuSqcAssExt/(nbMotu)}}% Complete</span>
                </div>
              </div>
            </div>
            <div class="w_right w_20">
              <span>{{ nbMotuSqcAssExt }}</span>
            </div>
            <div class="clearfix"></div>
          </div>
        </div>
      </div>
    </div>

  </div>


  <div class="row">
    <div class="col-md-4 col-sm-4 col-xs-12">
          <div class="x_panel">
            <div class="x_title">
              <h2>Outils métiers</h2>
              <ul class="nav navbar-right panel_toolbox">
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>
                <li><a class="close-link"><i class="fa fa-close"></i></a>
                </li>
              </ul>
              <div class="clearfix"></div>
            </div>
            <div class="x_content">
              <div class="dashboard-widget-content">
                    
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesstation_index') }}">{{'import.station'|trans}}</a> <br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilescollecte_index') }}">{{'import.collecte'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfileslotmateriel_index') }}">{{'import.lotmateriel'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesindividu_index') }}">{{'import.individu'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesindividulame_index') }}">{{'import.individulame'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfileslotmaterielext_index') }}">{{'import.lotmaterielext'|trans}}</a><br />
                       <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesadn_index') }}">{{'import.adn'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilespcr_index') }}">{{'import.pcr'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfileschromatogramme_index') }}">{{'import.chromatogramme'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilespcrchromato_index') }}">{{'import.pcrchromato'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilessequenceassemblee_index') }}">{{'import.sequenceassemblee'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilessequenceassembleeext_index') }}">{{'import.sequenceassembleeext'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesmotu_index') }}">{{'import.motu'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilessource_index') }}">{{'import.source'|trans}}</a><br />
                         <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfileslotmaterielrange_index') }}">{{'import.boite.lotmaterielrange'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesindividulamerange_index') }}">{{'import.boite.individulamerange'|trans}}</a><br />
                        <i class="fa fa-arrow-circle-o-right"> </i> 
                            <a href="{{ path('importfilesadnrange_index') }}">{{'import.boite.adnrange'|trans}}</a><br />
                  
              </div>
            </div>
          </div>     
    </div>

    <div class="col-md-8 col-sm-8 col-xs-12">

      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
           
             <div class="x_panel">
        <div class="x_title">
          <h2>Dernière mise à jour<small></small></h2>
          <ul class="nav navbar-right panel_toolbox">
            <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Toute</a>
                </li>
                <li><a href="#">Station</a>
                </li>
                <li><a href="#">Collecte</a>
                </li>
                <li><a href="#">Lot materiel</a>
                </li>
                <li><a href="#">...</a>
                </li>
              </ul>
            </li>
            <li><a class="close-link"><i class="fa fa-close"></i></a>
            </li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="x_content">
          <div class="dashboard-widget-content">

            <ul class="list-unstyled timeline widget">
              <li>
                <div class="block">
                  <div class="block_content">
                    <h2 class="title">
                                      <a>Collecte</a>
                                  </h2>
                   
                    <div class="byline">
                      <span>13 hours ago</span> by <a>F Mallard</a>
                    </div>
                      <p class="excerpt"><b>code collecte</b>  ABOIM_201504  - <b>Code station</b> ABOIM  : <a href="/edit" class="btn btn-sm" ><span class="fa fa-eye fa-fw"></span></a>
                    </p>
                  </div>
                </div>
              </li>
              <li>
                <div class="block">
                  <div class="block_content">
                    <h2 class="title">
                                      <a>Lot Materiel</a>
                                  </h2>
                    <div class="byline">
                      <span>13 hours ago</span> by <a>F Mallard</a>
                    </div>
                      <p class="excerpt"><b>code collecte</b>  ABOIM_201504  - <b>Code lot materiel</b> PROASELLUS_SP|102K_201107  : <a href="/edit" class="btn btn-sm" ><span class="fa fa-eye fa-fw"></span></a>
                    </p>
                  </div>
                </div>
              </li>
              <li>
                <div class="block">
                  <div class="block_content">
                    <h2 class="title">
                                      <a>Adn</a>
                                  </h2>
                    <div class="byline">
                      <span>15 hours ago</span> by <a>L Konecky</a>
                    </div>
                      <p class="excerpt"><b>code adn</b>  AlexaPcavSauve4  - <b>Code ind biomol</b> 	Pcavaticus|SAUVEGAR_000000_AS4  : <a href="/edit" class="btn btn-sm" ><span class="fa fa-eye fa-fw"></span></a>
                    </p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
        </div>
      </div>
        
      <div class="row">

      </div>
    </div>
  </div>
                            
{% endblock %}


{% block scripts %}
{{ parent() }}

<script type="text/javascript">  
 
    $(document).ready(function(){
        
            var latitude = '45,0';
            var longitude = '5,0';
            //var data = $(this).serialize();
            var  data = {'latitude': latitude, 'longitude':longitude };            
            $.ajax({
                type: 'POST',
                data: data,
                url: "{{ path('mapstations') }}",
                error: function(jqXHR, textStatus, errorThrown) {
                    alert('error ajax request : '+errorThrown);
                    console.log(jqXHR);
                    console.log(textStatus);
                    console.log(errorThrown);
                },
                beforeSend: function(htmlResponse) {  
                    $(".geo-overlay").show();
                                },
                success: function (response) {
                    $(".geo-overlay").hide();
                    gd = stationsMap(response.stations, latitude, longitude);
                }
            });

               
    });
 </script>
{% endblock %}